<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal do Estudante - UNIFEOB</title>
    <link rel="stylesheet" href="/frontend/pagina-aluno/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>

<body>
    <div class="container">
        <header class="header">
            <div class="header-left">
                <div class="logo-icon">U</div>
                <div class="logo-text">Smart<br>Presença</div>
            </div>

            <div class="header-right">
                <div class="notification" title="Notificações">
                    <i class="fas fa-bell"></i>
                    <div class="notification-badge">3</div>
                </div>
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span class="user-name">Usuário</span>
                </div>
                <div class="logout">
                    <a href="../../login.html" title="Sair">Sair</a>
                </div>
                <div class="header-menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </header>

        <div class="page-wrapper">
            <!-- Sidebar -->
            <nav class="sidebar" aria-label="Menu lateral">
                <div class="sidebar-nav">
                    <a href="index.html" class="nav-item">
                        <i class="fas fa-home"></i>
                        <span>Início</span>
                    </a>
                    <a href="grade.html" class="nav-item active">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Grade Horária</span>
                    </a>
                    <a href="frequencia.html" class="nav-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Frequência</span>
                    </a>
                    <a href="qrcode.html" class="nav-item">
                        <i class="fas fa-qrcode"></i>
                        <span>QR Code</span>
                    </a>
                    <a href="sobre.html" class="nav-item">
                        <i class="fas fa-info-circle"></i>
                        <span>Sobre</span>
                    </a>
                </div>
            </nav>

            <main class="main-content">
                <h1 class="page-title">Grade Horária - Aluno</h1>

                <div class="today-alert" id="today-alert">
                    <i class="fas fa-calendar-check"></i>
                    <div class="today-info">
                        <h3>Sua aula de hoje</h3>
                        <p id="today-class">Carregando...</p>
                    </div>
                </div>

                <table class="schedule-table">
                    <thead>
                        <tr>
                            <th>Dia da Semana</th>
                            <th>Horário</th>
                            <th>Disciplina</th>
                            <th>Local</th>
                        </tr>
                    </thead>
                    <tbody id="schedule-body">
                        <tr data-day="1">
                            <td class="day-column">Segunda-feira</td>
                            <td class="time-column">19:40 - 22:30</td>
                            <td class="subject-column">
                                <div class="subject-name">Desenvolvimento de Interfaces de Usuário para Web</div>
                                <!-- <div class="subject-code">POO001 - Turma A</div> -->
                            </td>
                            <td class="location-column">
                                <div class="location-info">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>Lab 01</span>
                                </div>
                            </td>
                        </tr>
                        <tr data-day="2">
                            <td class="day-column">Terça-feira</td>
                            <td class="time-column">19:40 - 22:30</td>
                            <td class="subject-column">
                                <div class="subject-name">Computação em Nuvem</div>
                                <!-- <div class="subject-code">BD001 - Turma B</div> -->
                            </td>
                            <td class="location-column">
                                <div class="location-info">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>Lab 01</span>
                                </div>
                            </td>
                        </tr>
                        <tr data-day="3">
                            <td class="day-column">Quarta-feira</td>
                            <td class="time-column">19:40 - 22:30</td>
                            <td class="subject-column">
                                <div class="subject-name">Tecnologias para Desenvolvimento Web</div>
                                <!-- <div class="subject-code">SO001 - Turma A</div> -->
                            </td>
                            <td class="location-column">
                                <div class="location-info">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>Lab 01</span>
                                </div>
                            </td>
                        </tr>
                        <tr data-day="4">
                            <td class="day-column">Quinta-feira</td>
                            <td class="time-column">19:40 - 22:30</td>
                            <td class="subject-column">
                                <div class="subject-name">Integração de Dados</div>
                                <!-- <div class="subject-code">ED001 - Turma C</div> -->
                            </td>
                            <td class="location-column">
                                <div class="location-info">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>Lab 01</span>
                                </div>
                            </td>
                        </tr>
                        <tr data-day="5">
                            <td class="day-column">Sexta-feira</td>
                            <td class="time-column">19:40 - 22:30</td>
                            <td class="subject-column">
                                <div class="subject-name">Projeto Integrado Desenvolvimento de Aplicação Web</div>
                                <!-- <div class="subject-code">PW001 - Turma A</div> -->
                            </td>
                            <td class="location-column">
                                <div class="location-info">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>Lab 01</span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </main>
        </div>
    </div>

    <script>
        // Mobile menu toggle
        const menuToggle = document.querySelector('.header-menu-toggle');
        const sidebar = document.querySelector('.sidebar');

        if (menuToggle) {
            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('active');
            });
        }

        // Get today's class
        function getTodayClass() {
            const diasSemana = [
                "Domingo", "Segunda-feira", "Terça-feira", "Quarta-feira",
                "Quinta-feira", "Sexta-feira", "Sábado"
            ];

            const classes = {
                1: {
                    subject: "Desenvolvimento de Interfaces de Usuário para Web",
                    // code: "POO001 - Turma A",
                    location: "Lab 01"
                },
                2: {
                    subject: "Computação em Nuvem",
                    // code: "BD001 - Turma B",
                    location: "Lab 01"
                },
                3: {
                    subject: "Tecnologias para Desenvolvimento Webs",
                    // code: "SO001 - Turma A",
                    location: "Lab 01"
                },
                4: {
                    subject: "Integração de Dados",
                    // code: "ED001 - Turma C",
                    location: "Lab 01"
                },
                5: {
                    subject: "Projeto Integrado Desenvolvimento de Aplicação Web",
                    // code: "PW001 - Turma A",
                    location: "Lab 01"
                }
            };

            const hoje = new Date();
            const diaSemana = hoje.getDay(); // 0 = Sunday, 1 = Monday, etc.

            const dia = hoje.getDate();
            const mes = hoje.getMonth();
            const ano = hoje.getFullYear();

            const mesesAno = [
                "Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho",
                "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
            ];

            const todayAlert = document.getElementById('today-alert');
            const todayClass = document.getElementById('today-class');

            if (diaSemana > 0 && diaSemana < 6) {
                // It's a weekday
                const todayClassInfo = classes[diaSemana];

                // Set text for today's class
                todayClass.innerHTML = `
                    <strong>${diasSemana[diaSemana]}, ${dia} de ${mesesAno[mes]} de ${ano}</strong><br>
                    ${todayClassInfo.subject} <br>
                    ${todayClassInfo.location} | 19:40 - 22:30
                `;

                // Highlight current day in table
                const rows = document.querySelectorAll('#schedule-body tr');
                rows.forEach(row => {
                    if (parseInt(row.getAttribute('data-day')) === diaSemana) {
                        row.classList.add('current-day');
                    }
                });

            } else {
                todayClass.innerHTML = `
                    <strong>${diasSemana[diaSemana]}, ${dia} de ${mesesAno[mes]} de ${ano}</strong><br>
                    Não há aulas programadas para hoje. Aproveite seu fim de semana!
                `;

                todayAlert.classList.add('weekend');
                document.querySelector('.today-alert i').className = 'fas fa-calendar-times';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            getTodayClass();
        });
    </script>
    <script src="../api.js"></script>
    <script src="grade.js"></script>
</body>

</html>